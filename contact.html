<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - E-Shop</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            // ВАШ PUBLIC KEY
            emailjs.init("PHAbpWvK_XplLw-5_");
        })();
    </script>
</head>

<body>

    <section id="header">
        <a href="#"><img src="img/logo.png" class="logo" alt=""></a>
        <div>
            <ul id="navbar">
                <li><a href="index.html">Home</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="about.html">About</a></li>
                <li><a class="active" href="contact.html">Contact</a></li>
                <li id="lg-bag"><a href="cart.html"><i class="far fa-shopping-bag"></i></a></li>
                <a href="#" id="close"><i class="far fa-times"></i></a>
            </ul>
        </div>
    </section>

    <section id="page-header" class="about-header">
        <h2>#let's_talk</h2>
        <p>LEAVE A MESSAGE, We love to hear from you!</p>
    </section>

    <section id="contact-details" class="section-p1">
        <div class="details">
            <span>GET IN TOUCH</span>
            <h2>Visit one of our agency locations or contact us today</h2>
            <h3>Head Office</h3>
            <div>
                <li><i class="fal fa-map"></i><p>56 Glassford St, Glasgow G1 1UL, New York</p></li>
                <li><i class="fal fa-envelope"></i><p>contact@example.com</p></li>
                <li><i class="fal fa-phone-alt"></i><p>+01 2222 365 / (+91) 01 2345 6789</p></li>
                <li><i class="fal fa-clock"></i><p>Monday to Saturday: 9.00am to 16.00pm</p></li>
            </div>
        </div>
        <div class="map">
            <iframe src="https://www.google.com/maps/embed?..." width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
        </div>
    </section>

    <section id="form-details">
        <form id="verification-form">
            <span>LEAVE A MESSAGE</span>
            <h2>Verify your Email to continue</h2>
            <input type="text" id="user_name" placeholder="Your Name" required>
            <input type="email" id="user_email" placeholder="E-mail" required>
            
            <button type="button" class="normal" onclick="sendCode()">Get Verification Code</button>

            <div id="verif_section" style="display:none; margin-top: 20px; width: 100%;">
                <p style="color: #088178; font-weight: 600;">Check your email for the 4-digit code:</p>
                <input type="text" id="input_code" placeholder="Enter Code Here">
                <button type="button" class="normal" onclick="verifyCode()">Confirm & Go to Fitting Room</button>
            </div>
        </form>

        <div class="people">
            <div>
                <img src="img/people/1.png" alt="">
                <p><span>John Doe</span> Senior Marketing Manager <br> Phone: + 000 123 000 77 88 <br>Email: contact@example.com</p>
            </div>
            </div>
    </section>

    <script>
        let generatedCode = null;

        function sendCode() {
            const email = document.getElementById('user_email').value;
            const name = document.getElementById('user_name').value || "Guest";

            if (!email.includes('@')) {
                alert("Please enter a valid email address!");
                return;
            }

            // Генерируем 4-значный код
            generatedCode = Math.floor(1000 + Math.random() * 9000).toString();

            // Параметры для вашего шаблона template_xxd560t
            const templateParams = {
                to_email: email,
                user_name: name,
                verification_code: generatedCode 
            };

            // Замените 'service_gmail' на ID вашего сервиса из EmailJS, если он другой
            emailjs.send('service_shop', 'template_xxd560t', templateParams)
                .then(function(response) {
                    alert("The code has been sent to your email!");
                    document.getElementById('verif_section').style.display = 'block';
                }, function(error) {
                    alert("Error sending email. Check your Service ID in EmailJS.");
                    console.log("Error:", error);
                });
        }

        function verifyCode() {
            const userEntered = document.getElementById('input_code').value;

            if (userEntered === generatedCode) {
                alert("Email verified successfully!");
                // Переход в примерочную после успеха
                window.location.href = "fitting.html";
            } else {
                alert("Invalid code. Please try again.");
            }
        }
    </script>

    <footer class="section-p1">
        </footer>

</body>
</html>
