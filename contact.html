<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - E-Shop</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            emailjs.init("PHAbpWvK_XplLw-5_");
        })();
    </script>
</head>

<body>

    <section id="header">
        <a href="#"><img src="img/logo.png" class="logo" alt=""></a>
        <div>
            <ul id="navbar">
                <li><a href="index.html">Home</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="about.html">About</a></li>
                <li><a class="active" href="contact.html">Contact</a></li>
                <li id="lg-bag"><a href="cart.html"><i class="far fa-shopping-bag"></i></a></li>
                <a href="#" id="close"><i class="far fa-times"></i></a>
            </ul>
        </div>
    </section>

    <section id="page-header" class="about-header">
        <h2>#security_check</h2>
        <p>Please verify your identity to continue</p>
    </section>

    <section id="form-details">
        <form id="verification-form">
            <span>SECURITY CHECK</span>
            <h2>Confirm Your Identity</h2>
            <p>Please verify your email address to continue using our services.</p>
            
            <input type="text" id="user_name" placeholder="Full Name" required>
            <input type="email" id="user_email" placeholder="Email Address" required>
            
            <button type="button" class="normal" id="send-btn" onclick="sendCode()">Send Code</button>

            <div id="verif_section" style="display:none; margin-top: 20px; border-top: 1px solid #eee; padding-top: 20px;">
                <p style="color: #088178; font-size: 14px;">A 4-digit code has been sent to your inbox.</p>
                <input type="text" id="input_code" placeholder="Enter 4-digit code">
                <button type="button" class="normal" onclick="verifyIdentity()">Verify Identity</button>
            </div>
        </form>
    </section>

    <footer class="section-p1">
        <div class="col">
            <img class="logo" src="img/logo.png" alt="">
            <h4>Contact</h4>
            <p><strong>Address: </strong>Ваш адрес здесь</p>
            <p><strong>Phone:</strong> +01 2222 365</p>
        </div>
        <div class="copyright">
            <p>© 2025, Arinnams - E-commerce</p>
        </div>
    </footer>

    <script>
        let generatedCode = null;

        function sendCode() {
            const email = document.getElementById('user_email').value;
            const name = document.getElementById('user_name').value || "User";

            if (!email.includes('@')) {
                alert("Please enter a valid email!");
                return;
            }

            generatedCode = Math.floor(1000 + Math.random() * 9000).toString();

            const templateParams = {
                to_email: email,
                user_name: name,
                verification_code: generatedCode 
            };

            emailjs.send('service_gmail', 'template_xxd560t', templateParams)
                .then(function() {
                    alert("Code sent successfully!");
                    document.getElementById('verif_section').style.display = 'block';
                    document.getElementById('send-btn').innerText = "Resend Code";
                }, function(error) {
                    alert("Error: Please check your EmailJS Service ID");
                });
        }

        function verifyIdentity() {
            const userEntered = document.getElementById('input_code').value;

            if (userEntered === generatedCode) {
                alert("Identity Confirmed! Welcome, " + document.getElementById('user_name').value);
                document.getElementById('verification-form').innerHTML = "<h2>Verification Successful</h2><p>Your identity has been verified. You can now browse the shop with full access.</p>";
            } else {
                alert("Incorrect code. Please try again.");
            }
        }
    </script>

</body>
</html>
