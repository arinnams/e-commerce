<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - E-Shop</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            // Твой Public Key
            emailjs.init("PHAbpWvK_XplLw-5_");
        })();
    </script>
</head>

<body>

    <section id="header">
        <a href="#"><img src="img/logo.png" class="logo" alt=""></a>
        <div>
            <ul id="navbar">
                <li><a href="index.html">Home</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="about.html">About</a></li>
                <li><a class="active" href="contact.html">Contact</a></li>
                <li id="lg-bag"><a href="cart.html"><i class="far fa-shopping-bag"></i></a></li>
                <a href="#" id="close"><i class="far fa-times"></i></a>
            </ul>
        </div>
    </section>

    <section id="page-header" class="about-header">
        <h2>#security_check</h2>
        <p>Please verify your identity to continue</p>
    </section>

    <section id="form-details">
        <form id="verification-form">
            <span>IDENTITY VERIFICATION</span>
            <h2>Confirm it's you</h2>
            
            <input type="text" id="user_name" placeholder="Your Name" required>
            <input type="email" id="user_email" placeholder="Your E-mail" required>
            
            <button type="button" class="normal" id="send-btn" onclick="sendCode()">Get Verification Code</button>

            <div id="verif_section" style="display:none; margin-top: 20px; width: 100%;">
                <p style="color: #088178; font-weight: 600; margin-bottom: 10px;">Enter the 4-digit code sent to your email:</p>
                <input type="text" id="input_code" placeholder="Example: 1234">
                <button type="button" class="normal" onclick="verifyIdentity()">Verify Identity</button>
            </div>
        </form>

        <div class="people">
            <div>
                <img src="img/people/1.png" alt="">
                <p><span>Support Team</span> Security Specialist <br> Phone: + 000 123 000 77 88 <br>Email: contact@example.com</p>
            </div>
        </div>
    </section>

    <footer class="section-p1">
        <div class="col">
            <img class="logo" src="img/logo.png" alt="">
            <h4>Contact</h4>
            <p><strong>Address: </strong> 562 Wellington Road, Street 32, San Francisco</p>
            <p><strong>Phone:</strong> +01 2222 365 / (+91) 01 2345 6789</p>
            <p><strong>Hours:</strong> 10:00 - 18:00, Mon - Sat</p>
        </div>
        <div class="copyright">
            <p>© 2025, Arinnams - E-commerce Identity Verification</p>
        </div>
    </footer>

    <script>
        let generatedCode = null;

        function sendCode() {
            const email = document.getElementById('user_email').value;
            const name = document.getElementById('user_name').value || "Customer";

            if (!email.includes('@')) {
                alert("Please enter a valid email address!");
                return;
            }

            // Генерируем 4 цифры
            generatedCode = Math.floor(1000 + Math.random() * 9000).toString();

            const templateParams = {
                to_email: email,
                user_name: name,
                verification_code: generatedCode 
            };

            // Используем твои ID: service_gmail и template_xxd560t
            emailjs.send('service_gmail', 'template_xxd560t', templateParams)
                .then(function() {
                    alert("Verification code has been sent!");
                    document.getElementById('verif_section').style.display = 'block';
                    document.getElementById('send-btn').innerText = "Resend Code";
                }, function(error) {
                    alert("Check if your EmailJS Service ID is 'service_gmail'");
                    console.error("EmailJS Error:", error);
                });
        }

        function verifyIdentity() {
            const userEntered = document.getElementById('input_code').value;

            if (userEntered === generatedCode) {
                alert("Success! Identity verified.");
                
                // Просто меняем содержимое формы на поздравление
                document.getElementById('verification-form').innerHTML = `
                    <h2 style="color: #088178;">Verification Complete</h2>
                    <p>Thank you, ${document.getElementById('user_name').value}. Your identity is confirmed.</p>
                `;
            } else {
                alert("Wrong code! Please try again.");
            }
        }
    </script>

</body>
</html>
